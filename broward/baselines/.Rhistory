knitr::opts_chunk$set(warning=F, message=F,echo = TRUE)
knitr::opts_knit$set(root.dir = '/tmp')
library(xgboost)
install.packages("xgboost")
library(xgboost)
train <- readRDS("~/Duke/Cynthia Research/KY-analysis-mytrials/broward/data/train.rds")
test <- readRDS("~/Duke/Cynthia Research/KY-analysis-mytrials/broward/data/test.rds")
library(xgboost)
## Format for xgboost
train_xgb = xgb.DMatrix(
"data" = train %>% select(-recid_use) %>% data.matrix(),
"label" = train %>% select(recid_use) %>% data.matrix() - 1
)
library(dplyr)
## Format for xgboost
train_xgb = xgb.DMatrix(
"data" = train %>% select(-recid_use) %>% data.matrix(),
"label" = train %>% select(recid_use) %>% data.matrix() - 1
)
param_xgb <- list(
objective = "binary:logistic",
eta = c(.1),
gamma = c(.1),
max_depth = c(6),
min_child_weight = c(5),
subsample = c(1),
colsample_bytree = c(1),
early_stopping_rounds=10
)
param_xgb = expand.grid(param_xgb) # Each row is a set of parameters to be cross validated
# Only one value for each of these parameters is allowed
setup_xgb = list(
nrounds=10000,
nfold=5
)
set.seed(2812)
out_xgb = fit_xgb_auc(train_xgb, test, param_xgb, setup_xgb)
library(tidyverse)
library(magrittr)
library(ROCR)
source('baseline_util.R')
log_path = "C:/Users/Caroline Wang/OneDrive/Duke/Criminal Recidivism/psa-analysis/broward/logs/baselines/"
set.seed(2812)
out_xgb = fit_xgb_auc(train_xgb, test, param_xgb, setup_xgb)
out_xgb$performance
